<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุฐูููุฑ ุงูููุฑุฏ ุงููููู</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../core/css/base.css">
    <link rel="stylesheet" href="../core/css/layout.css">
    <link rel="stylesheet" href="../core/css/components.css">
    <link rel="stylesheet" href="../core/css/theme-toggle.css">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header>
            <div class="logo-area" style="display:flex; align-items:center; gap:8px;">
                <img src="../core/assets/icons/icon48.png" alt="Wird Logo" style="width:24px; height:24px;">
                <h1>ููุฐูููุฑ ุงูููุฑุฏ ุงููููู</h1>
            </div>
            <div id="theme-toggle-container" class="theme-toggle-container"></div>
        </header>

        <!-- Tabs -->
        <div class="tabs-nav">
            <button class="tab-trigger active" data-tab="reminders-tab">ุงูุชุฐููุฑุงุช</button>
            <button class="tab-trigger" data-tab="add-new">ุฅุถุงูุฉ ุฌุฏูุฏ</button>
            <button class="tab-trigger" data-tab="reflections-tab">ุณุฌู ุงูุชุฏุจุฑ</button>
            <button class="tab-trigger" data-tab="settings-tab">ุงูุฅุนุฏุงุฏุงุช</button>
        </div>

        <!-- Content -->
        <main class="content">
            <!-- Tab: Reminders -->
            <section id="reminders-tab" class="tab-content active">
                <h2 class="section-title">ูุงุฆูุชู</h2>
                <div id="my-reminders-list" class="list-container">
                    <!-- Custom Reminders -->
                </div>

                <div class="divider"></div>

                <h2 class="section-title">ุชุฐููุฑุงุช ุงูุณูู</h2>
                <div id="presets-list" class="list-container">
                    <!-- Presets -->
                </div>
            </section>

            <!-- Tab: Add New / Edit -->
            <section id="add-new" class="tab-content">
                <form id="add-reminder-form">
                    <input type="hidden" id="edit-id" value="">

                    <div class="form-item">
                        <label class="label">ููุน ุงูุชุฐููุฑ</label>
                        <select id="reminder-type" class="input">
                            <option value="surah">ุณูุฑุฉ ูุงููุฉ</option>
                            <option value="ayah_range">ุขูุงุช ูุญุฏุฏุฉ</option>
                            <option value="juz">ุฌุฒุก ูู ุงููุฑุขู</option>
                        </select>
                    </div>

                    <div class="form-item">
                        <label class="label">ุงุฎุชุฑ ุงููุฏู</label>
                        <select id="target-select" class="input">
                            <option value="" disabled selected>ุฌุงุฑู ุงูุชุญููู...</option>
                        </select>
                    </div>

                    <div id="ayah-range-group" style="display:none; gap: 0.75rem;" class="form-item">
                        <div style="display: flex; gap: 0.5rem; width: 100%;">
                            <div style="flex: 1;">
                                <label class="label" style="font-size: 0.7rem;">ูู ุขูุฉ</label>
                                <input type="number" id="start-ayah" class="input" placeholder="1" min="1">
                            </div>
                            <div style="flex: 1;">
                                <label class="label" style="font-size: 0.7rem;">ุฅูู ุขูุฉ</label>
                                <input type="number" id="end-ayah" class="input" placeholder="5" min="1">
                            </div>
                        </div>
                        <p id="ayah-range-error" class="error-message"
                            style="display: none; color: hsl(var(--destructive)); font-size: 0.75rem; margin-top: 0.25rem;">
                        </p>
                    </div>

                    <div class="form-item">
                        <label class="label">ุงุณู ุงูุชุฐููุฑ</label>
                        <input type="text" id="reminder-name" placeholder="ูุซุงู: ูุฑุฏ ุงููุฌุฑ" class="input" required>
                    </div>

                    <div style="display: flex; gap: 0.75rem;" class="form-item">
                        <div style="flex: 1.5;">
                            <label class="label">ุงูุชูุฑุงุฑ</label>
                            <select id="frequency" class="input">
                                <option value="daily">ููููุงู</option>
                                <option value="weekly">ุฃุณุจูุนูุงู</option>
                            </select>
                        </div>
                        <div style="flex: 1;">
                            <label class="label">ุงูููุช</label>
                            <input type="time" id="time-select" class="input" required>
                        </div>
                    </div>

                    <div class="form-item" id="day-select-group" style="display:none;">
                        <label class="label">ุงูููู</label>
                        <select id="day-select" class="input">
                            <option value="5">ุงูุฌูุนุฉ</option>
                            <option value="6">ุงูุณุจุช</option>
                            <option value="0">ุงูุฃุญุฏ</option>
                            <option value="1">ุงูุงุซููู</option>
                            <option value="2">ุงูุซูุงุซุงุก</option>
                            <option value="3">ุงูุฃุฑุจุนุงุก</option>
                            <option value="4">ุงูุฎููุณ</option>
                        </select>
                    </div>

                    <div class="submit-area">
                        <button type="submit" id="submit-btn" class="btn btn-primary btn-xl">ุญูุธ ุงูุชุฐููุฑ</button>
                        <button type="button" id="cancel-edit-btn" class="btn btn-outline btn-xl"
                            style="display:none; margin-top:0.5rem;">ุฅูุบุงุก ุงูุชุนุฏูู</button>
                    </div>
                </form>
            </section>

            <!-- Tab: Reflections -->
            <section id="reflections-tab" class="tab-content">
                <div class="search-area">
                    <input type="text" id="ref-search" class="input" placeholder="ุจุญุซ ูู ุชุฏุจุฑุงุชู...">
                </div>

                <div id="reflections-journal-list" class="list-container">
                    <div class="empty-state">ูุง ุชูุฌุฏ ุชุฏุจุฑุงุช.</div>
                </div>
            </section>

            <!-- Tab: Settings -->
            <section id="settings-tab" class="tab-content">
                <h2 class="section-title">ุงููุณุฎ ุงูุงุญุชูุงุทู</h2>
                <div class="settings-group">
                    <p class="settings-description">ููููู ุชุตุฏูุฑ ุจูุงูุงุชู ูุญูุธูุง ุฃู ููููุง ุฅูู ุฌูุงุฒ ุขุฎุฑ.</p>
                    <button id="export-data" class="btn btn-primary btn-xl">
                        ๐ค ุชุตุฏูุฑ ุงูุจูุงูุงุช
                    </button>
                    <button id="import-data" class="btn btn-outline btn-xl">
                        ๐ฅ ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช
                    </button>
                    <input type="file" id="import-file-input" accept=".json" style="display:none;">
                </div>

                <div class="divider"></div>

                <h2 class="section-title">ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช</h2>
                <div class="settings-group">
                    <p class="settings-description">ุญุฐู ุณุฌู ุงูุฅูุฌุงุฒ ููุท ูุน ุงูุงุญุชูุงุธ ุจุงูุชุฐููุฑุงุช.</p>
                    <button id="clear-history" class="btn btn-outline btn-xl">
                        ๐๏ธ ูุณุญ ุณุฌู ุงูุฅูุฌุงุฒ
                    </button>
                </div>

                <div class="divider"></div>

                <h2 class="section-title" style="color: hsl(var(--destructive));">ููุทูุฉ ุงูุฎุทุฑ</h2>
                <div class="settings-group danger-zone">
                    <p class="settings-description">ุฅุนุงุฏุฉ ุถุจุท ุงูุฅุถุงูุฉ ุจุงููุงูู ูุญุฐู ุฌููุน ุงูุจูุงูุงุช. ูุฐุง ุงูุฅุฌุฑุงุก ูุง ูููู
                        ุงูุชุฑุงุฌุน ุนูู.</p>
                    <button id="reset-extension" class="btn btn-xl"
                        style="background-color: hsl(var(--destructive)); color: white;">
                        โ๏ธ ุฅุนุงุฏุฉ ุถุจุท ุงูุฅุถุงูุฉ
                    </button>
                </div>
            </section>
        </main>

        <!-- Delete Confirmation Modal -->
        <div id="delete-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <h3 class="modal-title">ุชุฃููุฏ ุงูุญุฐู</h3>
                <p class="modal-description">ูู ุฃูุช ูุชุฃูุฏ ูู ุฑุบุจุชู ูู ุญุฐู ูุฐุง ุงูุชุฐููุฑุ ูุง ูููู ุงูุชุฑุงุฌุน ุนู ูุฐู ุงูุฎุทูุฉ.
                </p>
                <div class="modal-footer">
                    <button id="cancel-delete" class="btn btn-outline">ุฅูุบุงุก</button>
                    <button id="confirm-delete" class="btn btn-primary"
                        style="background-color: hsl(var(--destructive));">ุญุฐู ุงูููุงุฆูุงู</button>
                </div>
            </div>
        </div>

        <!-- Generic Alert Modal -->
        <div id="alert-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <h3 id="alert-title" class="modal-title">ุชูุจูู</h3>
                <p id="alert-message" class="modal-description"></p>
                <div class="modal-footer">
                    <button id="alert-ok" class="btn btn-primary">ููุงูู</button>
                </div>
            </div>
        </div>

        <!-- Calendar Modal -->
        <div id="calendar-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content calendar-modal">
                <div class="calendar-header">
                    <button id="calendar-prev" class="btn btn-ghost calendar-nav">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </button>
                    <h3 id="calendar-title" class="modal-title"></h3>
                    <button id="calendar-next" class="btn btn-ghost calendar-nav">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                    </button>
                </div>
                <div id="calendar-reminder-name" class="calendar-reminder-name"></div>
                <div class="calendar-weekdays">
                    <span>ุฃุญุฏ</span>
                    <span>ุงุซู</span>
                    <span>ุซูุซ</span>
                    <span>ุฃุฑุจุน</span>
                    <span>ุฎูุณ</span>
                    <span>ุฌูุน</span>
                    <span>ุณุจุช</span>
                </div>
                <div id="calendar-grid" class="calendar-grid"></div>
                <div class="calendar-legend">
                    <div class="legend-item">
                        <span class="legend-icon completed">โ</span>
                        <span>ูููุฌุฒ</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-icon missed"></span>
                        <span>ุบูุฑ ูููุฌุฒ</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="calendar-close" class="btn btn-primary btn-xl">ุฅุบูุงู</button>
                </div>
            </div>
        </div>

    </div>
    <!-- Polyfill -->
    <script src="../lib/browser-polyfill.js"></script>
    <script src="popup.js" type="module"></script>
</body>

</html>
